{"ast":null,"code":"import { PlaneGeometry, ShaderMaterial, Uniform, Mesh, PerspectiveCamera, Scene, WebGLRenderer, Texture, SRGBColorSpace } from 'three';\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\nexport function decompress(texture) {\n  let maxTextureSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Infinity;\n  let renderer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  if (!fullscreenQuadGeometry) fullscreenQuadGeometry = new PlaneGeometry(2, 2, 1, 1);\n  if (!fullscreenQuadMaterial) fullscreenQuadMaterial = new ShaderMaterial({\n    uniforms: {\n      blitTexture: new Uniform(texture)\n    },\n    vertexShader: \"\\n            varying vec2 vUv;\\n            void main(){\\n                vUv = uv;\\n                gl_Position = vec4(position.xy * 1.0,0.,.999999);\\n            }\",\n    fragmentShader: \"\\n            uniform sampler2D blitTexture; \\n            varying vec2 vUv;\\n\\n            void main(){ \\n                gl_FragColor = vec4(vUv.xy, 0, 1);\\n                \\n                #ifdef IS_SRGB\\n                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\\n                #else\\n                gl_FragColor = texture2D( blitTexture, vUv);\\n                #endif\\n            }\"\n  });\n  fullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n  fullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n  fullscreenQuadMaterial.needsUpdate = true;\n  if (!fullscreenQuad) {\n    fullscreenQuad = new Mesh(fullscreenQuadGeometry, fullscreenQuadMaterial);\n    fullscreenQuad.frustrumCulled = false;\n  }\n  const _camera = new PerspectiveCamera();\n  const _scene = new Scene();\n  _scene.add(fullscreenQuad);\n  if (!renderer) {\n    renderer = _renderer = new WebGLRenderer({\n      antialias: false\n    });\n  }\n  renderer.setSize(Math.min(texture.image.width, maxTextureSize), Math.min(texture.image.height, maxTextureSize));\n  renderer.clear();\n  renderer.render(_scene, _camera);\n  const readableTexture = new Texture(renderer.domElement);\n  readableTexture.minFilter = texture.minFilter;\n  readableTexture.magFilter = texture.magFilter;\n  readableTexture.wrapS = texture.wrapS;\n  readableTexture.wrapT = texture.wrapT;\n  readableTexture.name = texture.name;\n  if (_renderer) {\n    _renderer.dispose();\n    _renderer = null;\n  }\n  return readableTexture;\n}","map":{"version":3,"names":["PlaneGeometry","ShaderMaterial","Uniform","Mesh","PerspectiveCamera","Scene","WebGLRenderer","Texture","SRGBColorSpace","_renderer","fullscreenQuadGeometry","fullscreenQuadMaterial","fullscreenQuad","decompress","texture","maxTextureSize","arguments","length","undefined","Infinity","renderer","uniforms","blitTexture","vertexShader","fragmentShader","value","defines","IS_SRGB","colorSpace","needsUpdate","frustrumCulled","_camera","_scene","add","antialias","setSize","Math","min","image","width","height","clear","render","readableTexture","domElement","minFilter","magFilter","wrapS","wrapT","name","dispose"],"sources":["/Users/ratseevtimur/Documents/Test-Projects/door-3d/node_modules/three/examples/jsm/utils/TextureUtils.js"],"sourcesContent":["import {\n\tPlaneGeometry,\n\tShaderMaterial,\n\tUniform,\n\tMesh,\n\tPerspectiveCamera,\n\tScene,\n\tWebGLRenderer,\n\tTexture,\n\tSRGBColorSpace\n} from 'three';\n\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\n\nexport function decompress( texture, maxTextureSize = Infinity, renderer = null ) {\n\n\tif ( ! fullscreenQuadGeometry ) fullscreenQuadGeometry = new PlaneGeometry( 2, 2, 1, 1 );\n\tif ( ! fullscreenQuadMaterial ) fullscreenQuadMaterial = new ShaderMaterial( {\n\t\tuniforms: { blitTexture: new Uniform( texture ) },\n\t\tvertexShader: `\n            varying vec2 vUv;\n            void main(){\n                vUv = uv;\n                gl_Position = vec4(position.xy * 1.0,0.,.999999);\n            }`,\n\t\tfragmentShader: `\n            uniform sampler2D blitTexture; \n            varying vec2 vUv;\n\n            void main(){ \n                gl_FragColor = vec4(vUv.xy, 0, 1);\n                \n                #ifdef IS_SRGB\n                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n                #else\n                gl_FragColor = texture2D( blitTexture, vUv);\n                #endif\n            }`\n\t} );\n\n\tfullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n\tfullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n\tfullscreenQuadMaterial.needsUpdate = true;\n\n\tif ( ! fullscreenQuad ) {\n\n\t\tfullscreenQuad = new Mesh( fullscreenQuadGeometry, fullscreenQuadMaterial );\n\t\tfullscreenQuad.frustrumCulled = false;\n\n\t}\n\n\tconst _camera = new PerspectiveCamera();\n\tconst _scene = new Scene();\n\t_scene.add( fullscreenQuad );\n\n\tif ( ! renderer ) {\n\n\t\trenderer = _renderer = new WebGLRenderer( { antialias: false } );\n\n\t}\n\n\trenderer.setSize( Math.min( texture.image.width, maxTextureSize ), Math.min( texture.image.height, maxTextureSize ) );\n\trenderer.clear();\n\trenderer.render( _scene, _camera );\n\n\tconst readableTexture = new Texture( renderer.domElement );\n\n\treadableTexture.minFilter = texture.minFilter;\n\treadableTexture.magFilter = texture.magFilter;\n\treadableTexture.wrapS = texture.wrapS;\n\treadableTexture.wrapT = texture.wrapT;\n\treadableTexture.name = texture.name;\n\n\tif ( _renderer ) {\n\n\t\t_renderer.dispose();\n\t\t_renderer = null;\n\n\t}\n\n\treturn readableTexture;\n\n}\n"],"mappings":"AAAA,SACCA,aAAa,EACbC,cAAc,EACdC,OAAO,EACPC,IAAI,EACJC,iBAAiB,EACjBC,KAAK,EACLC,aAAa,EACbC,OAAO,EACPC,cAAc,QACR,OAAO;AAEd,IAAIC,SAAS;AACb,IAAIC,sBAAsB;AAC1B,IAAIC,sBAAsB;AAC1B,IAAIC,cAAc;AAElB,OAAO,SAASC,UAAUA,CAAEC,OAAO,EAA+C;EAAA,IAA7CC,cAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGG,QAAQ;EAAA,IAAEC,QAAQ,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAE9E,IAAK,CAAEN,sBAAsB,EAAGA,sBAAsB,GAAG,IAAIV,aAAa,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAE,CAAC;EACxF,IAAK,CAAEW,sBAAsB,EAAGA,sBAAsB,GAAG,IAAIV,cAAc,CAAE;IAC5EoB,QAAQ,EAAE;MAAEC,WAAW,EAAE,IAAIpB,OAAO,CAAEY,OAAQ;IAAE,CAAC;IACjDS,YAAY,0KAKA;IACZC,cAAc;EAaf,CAAE,CAAC;EAEHb,sBAAsB,CAACU,QAAQ,CAACC,WAAW,CAACG,KAAK,GAAGX,OAAO;EAC3DH,sBAAsB,CAACe,OAAO,CAACC,OAAO,GAAGb,OAAO,CAACc,UAAU,IAAIpB,cAAc;EAC7EG,sBAAsB,CAACkB,WAAW,GAAG,IAAI;EAEzC,IAAK,CAAEjB,cAAc,EAAG;IAEvBA,cAAc,GAAG,IAAIT,IAAI,CAAEO,sBAAsB,EAAEC,sBAAuB,CAAC;IAC3EC,cAAc,CAACkB,cAAc,GAAG,KAAK;EAEtC;EAEA,MAAMC,OAAO,GAAG,IAAI3B,iBAAiB,CAAC,CAAC;EACvC,MAAM4B,MAAM,GAAG,IAAI3B,KAAK,CAAC,CAAC;EAC1B2B,MAAM,CAACC,GAAG,CAAErB,cAAe,CAAC;EAE5B,IAAK,CAAEQ,QAAQ,EAAG;IAEjBA,QAAQ,GAAGX,SAAS,GAAG,IAAIH,aAAa,CAAE;MAAE4B,SAAS,EAAE;IAAM,CAAE,CAAC;EAEjE;EAEAd,QAAQ,CAACe,OAAO,CAAEC,IAAI,CAACC,GAAG,CAAEvB,OAAO,CAACwB,KAAK,CAACC,KAAK,EAAExB,cAAe,CAAC,EAAEqB,IAAI,CAACC,GAAG,CAAEvB,OAAO,CAACwB,KAAK,CAACE,MAAM,EAAEzB,cAAe,CAAE,CAAC;EACrHK,QAAQ,CAACqB,KAAK,CAAC,CAAC;EAChBrB,QAAQ,CAACsB,MAAM,CAAEV,MAAM,EAAED,OAAQ,CAAC;EAElC,MAAMY,eAAe,GAAG,IAAIpC,OAAO,CAAEa,QAAQ,CAACwB,UAAW,CAAC;EAE1DD,eAAe,CAACE,SAAS,GAAG/B,OAAO,CAAC+B,SAAS;EAC7CF,eAAe,CAACG,SAAS,GAAGhC,OAAO,CAACgC,SAAS;EAC7CH,eAAe,CAACI,KAAK,GAAGjC,OAAO,CAACiC,KAAK;EACrCJ,eAAe,CAACK,KAAK,GAAGlC,OAAO,CAACkC,KAAK;EACrCL,eAAe,CAACM,IAAI,GAAGnC,OAAO,CAACmC,IAAI;EAEnC,IAAKxC,SAAS,EAAG;IAEhBA,SAAS,CAACyC,OAAO,CAAC,CAAC;IACnBzC,SAAS,GAAG,IAAI;EAEjB;EAEA,OAAOkC,eAAe;AAEvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}