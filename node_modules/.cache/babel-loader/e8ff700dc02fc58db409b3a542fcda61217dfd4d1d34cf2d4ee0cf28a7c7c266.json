{"ast":null,"code":"import React,{useEffect,useState,useRef,Suspense}from\"react\";import TexturesList from\"../components/textures/TexturesList.js\";import{Dropdown}from'primereact/dropdown';import Toolbar from\"../components/toolbar/Toolbar.js\";import{SoftShadows,Float,CameraControls,OrbitControls,Sky,AccumulativeShadows,RandomizedLight,PerformanceMonitor,Html,Merged,GizmoHelper,GizmoViewport,useProgress}from\"@react-three/drei\";import{Canvas,useFrame,useLoader,merge,useResource}from'@react-three/fiber';import{useSelector,useDispatch}from'react-redux';import{setFormaModel}from\"../redux/reducers/model-properties.js\";import{Slider}from\"primereact/slider\";// import InputGroupDemo from \"../components/form/form.js\"\nimport\"./Home.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Box=/*#__PURE__*/React.lazy(()=>import('../components/3D/Box.js'));const GLTF=/*#__PURE__*/React.lazy(()=>import('../components/3D/GLTF.js'));const OBJ=/*#__PURE__*/React.lazy(()=>import('../components/3D/OBJ.js'));function Home(){const mesh=useRef();const[scaleValue,setScaleValue]=useState(.1);const{progress}=useProgress();const dispatch=useDispatch();const colorBackground=useSelector(state=>state.scene.colorBackground);// const { visible, colorBackground } = useSelector((state) => state.scene)\nconst[forma,setForma]=useState(1);const formsCountertop=[{name:'Примитив',value:1},{name:'GLTF',value:2},{name:'OBJ',value:3}];// В функцию RenderForma входят все виды форм внутри каждой свой Canvas и Scene\n// В каждую форму передается переменная mesh для записи меша для возможности скачивания GLTF в одной точке\nconst RenderForma=()=>{if(forma===3){return/*#__PURE__*/_jsx(OBJ,{mesh:mesh,forma:forma,scaleValue:scaleValue});}else if(forma===2){return/*#__PURE__*/_jsx(GLTF,{mesh:mesh,forma:forma,scaleValue:scaleValue});}else{return/*#__PURE__*/_jsx(Box,{mesh:mesh,forma:forma});}};const[selectedForma,setSelectedForma]=useState(formsCountertop[0]);const selectedFormaTemplate=(option,props)=>{if(option){return/*#__PURE__*/_jsx(\"div\",{className:\"flex align-items-center\",style:{justifyContent:'space-between'},children:/*#__PURE__*/_jsx(\"div\",{children:option.naame})});}return/*#__PURE__*/_jsx(\"span\",{children:props.placeholder});};const formaOptionTemplate=option=>{return/*#__PURE__*/_jsx(\"div\",{className:\"flex align-items-center\",style:{justifyContent:'space-between'},children:/*#__PURE__*/_jsx(\"div\",{children:option.name})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"Home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selects\",children:[/*#__PURE__*/_jsx(TexturesList,{}),/*#__PURE__*/_jsx(Dropdown,{className:\"w-full md:w-14rem\"//panelFooterTemplate={panelFooterTemplate}\n,options:formsCountertop,optionLabel:\"value\",placeholder:\"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u043C\\u043E\\u0434\\u0435\\u043B\\u0438\",value:selectedForma,onChange:e=>{setSelectedForma(e.value);setForma(e.value);dispatch(setFormaModel(e.value));}// style={{ backgroundColor: \"rgba(48, 48, 48, 0.26)\", backdropFilter: \"blur(5px)\" }}\n,valueTemplate:selectedFormaTemplate,itemTemplate:formaOptionTemplate}),forma!=1&&/*#__PURE__*/_jsx(\"div\",{className:\"card flex justify-content-center\",children:/*#__PURE__*/_jsx(Slider,{value:scaleValue,onChange:e=>setScaleValue(e.value),orientation:\"vertical\",className:\"h-14rem\",step:0.01,min:0.01,max:0.2})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-panel\",children:[\" \",/*#__PURE__*/_jsx(Toolbar,{mesh:mesh,forma:forma}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"ddd-scena\",children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})/*<Html center>{progress} % loaded</Html>*/,children:/*#__PURE__*/_jsx(\"div\",{id:\"model\",children:/*#__PURE__*/_jsxs(Canvas,{shadows:true,dpr:[1,2],gl:{preserveDrawingBuffer:true},camera:{position:[-5,-2,10]},width:\"100%\",height:\"100%\",children:[/*#__PURE__*/_jsx(\"color\",{attach:\"background\",args:[\"#\".concat(colorBackground)]}),/*#__PURE__*/_jsx(OrbitControls,{makeDefault:true,minAzimuthAngle:-Math.PI/4,maxAzimuthAngle:Math.PI/4,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI-Math.PI/6}),/*#__PURE__*/_jsx(\"directionalLight\",{castShadow:true,position:[5,7,5],intensity:5}),/*#__PURE__*/_jsx(RenderForma,{})]})})})})]})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useRef","Suspense","TexturesList","Dropdown","Toolbar","SoftShadows","Float","CameraControls","OrbitControls","Sky","AccumulativeShadows","RandomizedLight","PerformanceMonitor","Html","Merged","GizmoHelper","GizmoViewport","useProgress","Canvas","useFrame","useLoader","merge","useResource","useSelector","useDispatch","setFormaModel","Slider","jsx","_jsx","jsxs","_jsxs","Box","lazy","GLTF","OBJ","Home","mesh","scaleValue","setScaleValue","progress","dispatch","colorBackground","state","scene","forma","setForma","formsCountertop","name","value","RenderForma","selectedForma","setSelectedForma","selectedFormaTemplate","option","props","className","style","justifyContent","children","naame","placeholder","formaOptionTemplate","options","optionLabel","onChange","e","valueTemplate","itemTemplate","orientation","step","min","max","fallback","id","shadows","dpr","gl","preserveDrawingBuffer","camera","position","width","height","attach","args","concat","makeDefault","minAzimuthAngle","Math","PI","maxAzimuthAngle","minPolarAngle","maxPolarAngle","castShadow","intensity"],"sources":["/Users/ratseevtimur/Documents/Test-Projects/door-3d/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport TexturesList from \"../components/textures/TexturesList.js\"\nimport { Dropdown } from 'primereact/dropdown';\nimport Toolbar from \"../components/toolbar/Toolbar.js\"\n\nimport {\n  SoftShadows, Float, CameraControls, OrbitControls, Sky, AccumulativeShadows, RandomizedLight,\n  PerformanceMonitor, Html, Merged, GizmoHelper, GizmoViewport, useProgress\n} from \"@react-three/drei\"\nimport { Canvas, useFrame, useLoader, merge, useResource } from '@react-three/fiber'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setFormaModel } from \"../redux/reducers/model-properties.js\";\nimport { Slider } from \"primereact/slider\";\n\n// import InputGroupDemo from \"../components/form/form.js\"\n\nimport \"./Home.scss\"\n\nconst Box = React.lazy(() => import('../components/3D/Box.js'));\nconst GLTF = React.lazy(() => import('../components/3D/GLTF.js'));\nconst OBJ = React.lazy(() => import('../components/3D/OBJ.js'));\n\nfunction Home() {\n  const mesh = useRef()\n  const [scaleValue, setScaleValue] = useState(.1);\n  const { progress } = useProgress()\n  const dispatch = useDispatch()\n  const colorBackground = useSelector((state) => state.scene.colorBackground)\n  // const { visible, colorBackground } = useSelector((state) => state.scene)\n  const [forma, setForma] = useState(1);\n  const formsCountertop = [\n    { name: 'Примитив', value: 1 },\n    { name: 'GLTF', value: 2 },\n    { name: 'OBJ', value: 3 }\n  ];\n\n  // В функцию RenderForma входят все виды форм внутри каждой свой Canvas и Scene\n  // В каждую форму передается переменная mesh для записи меша для возможности скачивания GLTF в одной точке\n  const RenderForma = () => {\n    if (forma === 3) {\n      return <OBJ mesh={mesh} forma={forma} scaleValue={scaleValue} />\n    }\n    else if (forma === 2) {\n      return <GLTF mesh={mesh} forma={forma} scaleValue={scaleValue} />\n    }\n    else {\n      return <Box mesh={mesh} forma={forma} />\n    }\n  }\n\n  const [selectedForma, setSelectedForma] = useState(formsCountertop[0]);\n\n  const selectedFormaTemplate = (option, props) => {\n    if (option) {\n      return (\n        <div className=\"flex align-items-center\" style={{ justifyContent: 'space-between' }}>\n          <div>{option.naame}</div>\n        </div>\n      );\n    }\n\n    return <span>{props.placeholder}</span>;\n  };\n\n\n  const formaOptionTemplate = (option) => {\n    return (\n      <div className=\"flex align-items-center\" style={{ justifyContent: 'space-between' }}>\n        <div>{option.name}</div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"Home\">\n\n      <div className=\"selects\">\n        <TexturesList />\n\n        <Dropdown className=\"w-full md:w-14rem\" //panelFooterTemplate={panelFooterTemplate}\n          options={formsCountertop}\n          optionLabel=\"value\"\n          placeholder=\"Выбор модели\"\n          value={selectedForma}\n          onChange={(e) => {\n            setSelectedForma(e.value);\n            setForma(e.value);\n            dispatch(setFormaModel(e.value))\n          }}\n          // style={{ backgroundColor: \"rgba(48, 48, 48, 0.26)\", backdropFilter: \"blur(5px)\" }}\n          valueTemplate={selectedFormaTemplate} itemTemplate={formaOptionTemplate}\n        />\n\n        {forma != 1 && \n          <div className=\"card flex justify-content-center\">\n            <Slider value={scaleValue} onChange={(e) => setScaleValue(e.value)} orientation=\"vertical\" className=\"h-14rem\"\n              step={0.01} min={0.01} max={0.2}\n            />\n          </div>\n        }\n          \n      </div>\n\n      <div className=\"content\">\n\n        <div className=\"buttons-panel\"> {/* Панель иснтрументов в правом верхнем углу */}\n          <Toolbar mesh={mesh}  forma={forma}/> {/* Передаем mesh in Toolbar для кнопки скачивкания файла GLTF */}\n        </div>\n\n\n\n        <div className=\"ddd-scena\">\n          <Suspense fallback={<div>Loading...</div>/*<Html center>{progress} % loaded</Html>*/}>\n            {/* Единый Canvas поможет избежать утечек памяти - \"THREE.WebGLRenderer: Context Lost.\" */}\n            <div id=\"model\">\n              <Canvas shadows dpr={[1, 2]} gl={{ preserveDrawingBuffer: true }}\n                camera={{ position: [-5, -2, 10] }} width={\"100%\"} height={\"100%\"}>\n                <color attach=\"background\" args={[`#${colorBackground}`]}\n                />\n                {/* <ambientLight intensity={1} /> */}\n               \n                <OrbitControls makeDefault \n                  minAzimuthAngle={-Math.PI / 4}\n                  maxAzimuthAngle={Math.PI / 4}\n                  minPolarAngle={Math.PI / 6}\n                  maxPolarAngle={Math.PI - Math.PI / 6}\n                />\n                <directionalLight castShadow position={[5, 7, 5]} intensity={5} />\n                {/* <pointLight position={[5, 10, 5]} intensity={10} /> */}\n                <RenderForma />{/* Компонент отрисовки основной части столешницы */}\n\n              </Canvas>\n            </div>\n\n          </Suspense>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}