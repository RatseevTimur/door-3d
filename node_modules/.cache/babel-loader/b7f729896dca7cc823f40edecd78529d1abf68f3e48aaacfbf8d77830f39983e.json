{"ast":null,"code":"import{createRoot}from'react-dom/client';import React,{useRef,useState,useEffect,useMemo}from'react';import{useLocation}from\"react-router-dom\";import{GizmoHelper,GizmoViewport,Html}from\"@react-three/drei\";import{Canvas,useFrame,useLoader,useResource}from'@react-three/fiber';import{TextureLoader}from'three/src/loaders/TextureLoader';import*as THREE from\"three\";import{Geometry,Base,Subtraction,Addition,Brush}from'@react-three/csg';import Sink from'./Sink.js';import EditSinkLayer from'./EditSinkLayer.js';import{useSelector,useDispatch}from'react-redux';import{setModelProperties,set_Prop_Box_forma}from\"../../redux/reducers/model-properties.js\";import\"./3D.scss\";import{useTexture}from\"@react-three/drei\";import{Mesh}from\"three\";import{OBJLoader}from\"three/examples/jsm/loaders/OBJLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Rock=_ref=>{let{scaleValue}=_ref;let textureSelected=useSelector(state=>state.textureSelected);const obj=useLoader(OBJLoader,\"/door/10057_wooden_door_v3_iterations-2.obj\");//const texture = useTexture(\"/door/10057_wooden_door_v1_diffuse.jpg\");\nconst texture=useTexture(textureSelected.url);//   const textureMap = useLoader(TextureLoader, texture.url)\n//   const geometry = useMemo(() => {\n//     let g;\n//     obj.traverse((c) => {\n//       if (c.type === \"Mesh\") {\n//         const _c = c as Mesh;\n//         g = _c.geometry;\n//       }\n//     });\n//     return g;\n//   }, [obj]);\nconst geometry=useMemo(()=>{let g;// obj.traverse( function ( child ) {\n//     if ( child.isMesh ) {\n//         child.material.map = texture;\n//         g = child.geometry//.computeVertexNormals();\n//     }\n// } );\nobj.traverse(function(child){if(child instanceof THREE.Mesh){child.material.map=texture;g=child.geometry;//.computeVertexNormals();\n}// if ( child.isMesh ) { child.castShadow = true; }\n});return g;},[obj]);return/*#__PURE__*/_jsx(\"mesh\",{castSwhadow:true,geometry:geometry,scale:scaleValue,rotation:[-1.56,0,0],position:[0,-10,0],children:/*#__PURE__*/_jsx(\"meshPhysicalMaterial\",{map:texture})})// <primitive object={obj} />\n;};const Scene=_ref2=>{let{scaleValue}=_ref2;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Rock,{scaleValue:scaleValue}),/*#__PURE__*/_jsx(GizmoHelper,{alignment:\"bottom-right\",margin:[80,80],children:/*#__PURE__*/_jsx(GizmoViewport,{labelColor:\"white\",axisHeadScale:1})})]});};export default Scene;","map":{"version":3,"names":["createRoot","React","useRef","useState","useEffect","useMemo","useLocation","GizmoHelper","GizmoViewport","Html","Canvas","useFrame","useLoader","useResource","TextureLoader","THREE","Geometry","Base","Subtraction","Addition","Brush","Sink","EditSinkLayer","useSelector","useDispatch","setModelProperties","set_Prop_Box_forma","useTexture","Mesh","OBJLoader","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Rock","_ref","scaleValue","textureSelected","state","obj","texture","url","geometry","g","traverse","child","material","map","castSwhadow","scale","rotation","position","children","Scene","_ref2","alignment","margin","labelColor","axisHeadScale"],"sources":["/Users/ratseevtimur/Documents/Test-Projects/door-3d/src/components/3D/OBJ.js"],"sourcesContent":["import { createRoot } from 'react-dom/client'\nimport React, { useRef, useState, useEffect, useMemo } from 'react'\nimport { useLocation } from \"react-router-dom\";\nimport { GizmoHelper, GizmoViewport, Html} from \"@react-three/drei\"\nimport { Canvas, useFrame, useLoader, useResource } from '@react-three/fiber'\nimport { TextureLoader } from 'three/src/loaders/TextureLoader'\nimport * as THREE from \"three\"\nimport { Geometry, Base, Subtraction, Addition, Brush } from '@react-three/csg'\nimport Sink from './Sink.js'\nimport EditSinkLayer from './EditSinkLayer.js'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setModelProperties, set_Prop_Box_forma } from \"../../redux/reducers/model-properties.js\";\n\nimport \"./3D.scss\"\n\nimport { useTexture } from \"@react-three/drei\";\nimport { Mesh } from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\n\nconst Rock = ({scaleValue}) => {\n    let textureSelected = useSelector((state) => state.textureSelected)\n  const obj = useLoader(OBJLoader, \"/door/10057_wooden_door_v3_iterations-2.obj\");\n//const texture = useTexture(\"/door/10057_wooden_door_v1_diffuse.jpg\");\n  const texture = useTexture(textureSelected.url);\n\n//   const textureMap = useLoader(TextureLoader, texture.url)\n//   const geometry = useMemo(() => {\n//     let g;\n//     obj.traverse((c) => {\n//       if (c.type === \"Mesh\") {\n//         const _c = c as Mesh;\n//         g = _c.geometry;\n//       }\n//     });\n//     return g;\n//   }, [obj]);\n\n   const geometry = useMemo(() => {\n        let g;\n        // obj.traverse( function ( child ) {\n\n        //     if ( child.isMesh ) {\n    \n        //         child.material.map = texture;\n        //         g = child.geometry//.computeVertexNormals();\n                \n        //     }\n    \n        // } );\n        obj.traverse( function ( child ) {\n            if ( child instanceof THREE.Mesh ) {\n                child.material.map = texture;\n                g = child.geometry//.computeVertexNormals();\n            }\n\n            // if ( child.isMesh ) { child.castShadow = true; }\n        } );\n        return g;\n    }, [obj]);\n\n   \n\n  return (\n    <mesh castSwhadow geometry={geometry} scale={scaleValue} rotation={[ -1.56, 0, 0]} position={[0,-10,0]}>\n      <meshPhysicalMaterial map={texture} />\n    </mesh>\n    // <primitive object={obj} />\n    \n  );\n};\n\nconst Scene = ({scaleValue}) => {\n    return (\n        <>\n            <Rock scaleValue={scaleValue}/>\n\n            <GizmoHelper alignment=\"bottom-right\" margin={[80, 80]}>\n                <GizmoViewport labelColor=\"white\" axisHeadScale={1} />\n            </GizmoHelper>\n        </>\n    )\n}\n\nexport default Scene\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}