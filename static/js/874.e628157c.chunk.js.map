{"version":3,"file":"static/js/874.e628157c.chunk.js","mappings":"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","sources":["components/3D/model.js","components/3D/Box.js","components/3D/EditSinkLayer.js","components/3D/inPoly.js","components/3D/Sink.js"],"sourcesContent":["import { MeshTransmissionMaterial } from \"@react-three/drei\"\n\nexport const Torus = (props) => (\n    <mesh receiveShadow castShadow {...props}>\n        <torusGeometry args={[4, 1.2, 128, 64]} />\n        <MeshTransmissionMaterial backside backsideThickness={5} thickness={2} />\n    </mesh>\n)\n\nexport const Knot = (props) => (\n    <mesh receiveShadow castShadow {...props}>\n        <torusKnotGeometry args={[3, 1, 256, 32]} />\n        <MeshTransmissionMaterial backside backsideThickness={5} thickness={2} />\n    </mesh>\n)\n\nconst App = () => (\n    <>\n        <Torus position={[5,5,3]}/>\n        <Knot castShadow position={[-10, -5, -10]}/>\n    </>\n)\n\nexport default App;","import React, { useRef, useState, useEffect, useLayoutEffect, useMemo } from 'react'\nimport { NavLink, useNavigate, useParams, useLocation, BrowserRouter } from \"react-router-dom\";\nimport {\n    Edges, Stage, Extrude, Decal, RandomizedLight,\n    SoftShadows, Float, CameraControls, Sky, PerformanceMonitor,\n    useGLTF, useTexture, PivotControls, AccumulativeShadows,\n    GizmoHelper, GizmoViewport, OrbitControls, Html,\n} from \"@react-three/drei\"\nimport { Canvas, useFrame, useLoader, useResource } from '@react-three/fiber'\nimport { TextureLoader } from 'three/src/loaders/TextureLoader'\nimport * as THREE from \"three\"\nimport { Geometry, Base, Subtraction, Addition, Brush } from '@react-three/csg'\nimport Model from './model.js'\nimport Sink from './Sink.js'\nimport EditSinkLayer from './EditSinkLayer.js'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setModelProperties, set_Prop_Box_forma } from \"../../redux/reducers/model-properties.js\";\nimport { DoubleSide } from \"three\";\n\nimport \"./3D.scss\"\n\nconst Scene = ({ forma, mesh }) => {\n    let scale = 100\n    let dispatch = useDispatch()\n    const location = useLocation()\n    let textureSelected = useSelector((state) => state.textureSelected)\n    let prop_Box_forma = useSelector((state) => state.modelProperties.prop_Box_forma)\n    const { visible, colorBackground } = useSelector((state) => state.scene)\n    const [boxSize, setBoxSize] = useState(prop_Box_forma);\n\n    useEffect(() => {\n        if (!location.pathname.includes('/save')) {\n            dispatch(set_Prop_Box_forma(boxSize))\n            dispatch(setModelProperties(boxSize))\n        }\n    }, [boxSize])\n\n    const textureMap = useLoader(TextureLoader, textureSelected.url)\n    const texturePlaneMap = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/textures/tile_texture3062.jpeg`)\n    textureMap.wrapS = THREE.RepeatWrapping\n    textureMap.wrapT = THREE.MirroredRepeatWrapping\n   \n\n    function NewBox(props) {\n\n        // var matrix = new THREE.Matrix4();\n        // matrix.multiply(new THREE.Matrix4().makeTranslation(0, 0, 850));\n        // matrix.multiply(new THREE.Matrix4().makeRotationZ(Math.PI / 2));\n\n        return (\n            <mesh\n                ref={mesh}\n                castShadow receiveShadow {...props}\n                matrixAutoUpdate={true}\n                castShadow\n            //onPointerDown={console.log}\n            //onPointerMove={(e) => console.log('move')}\n            >\n                <Geometry>\n                    <Base /*rotation={[ 0, Math.PI / 2, 0]} position={[-0.35, 0.4, 0.4]} */>\n                        <boxGeometry attach=\"geometry\" args={[boxSize.widthAll / 100, boxSize.heightAll / 100, boxSize.thickness / 100]} />\n                    </Base>\n\n                    {/* <Subtraction rotation={[Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n                        <cylinderGeometry args={[1, 1, 1, 66, 32]} />\n                    </Subtraction> */}\n\n                    <Subtraction rotation={[0, 0, 0]} position={[0, 0, 0]}>\n                        <cylinderGeometry args={[0, 0, 0, 3, 3]} />\n                    </Subtraction>\n\n                    {boxSize.cuts.map((cut, i) => {\n                        if (cut.forma === \"square\") return (\n                            <Subtraction key={i} rotation={[0, 0, cut.rotation[2]]} position={[cut.position[0], cut.position[1], 0]}>\n                                <boxGeometry args={[cut.width / scale, cut.height / scale, 1]} />\n                            </Subtraction>\n                        )\n                        else return (\n                            <Subtraction key={i} rotation={[Math.PI / 2, 0, 0]} position={[cut.position[0], cut.position[1], 0]}>\n                                <cylinderGeometry args={[cut.width / 2 / scale, cut.width / 2 / scale, 1]} />\n                            </Subtraction>\n                        )\n                    })}\n\n                </Geometry>\n                {/* <ChamfersModels boxSize={boxSize} textureMap={textureMap} setBoxSize={setBoxSize} /> */}\n                <meshPhongMaterial\n                    map={textureMap} shininess={100} bumpMap={textureMap} bumpScale={0.01} transparent={false} attach=\"material-0\"\n                    // opacity={1} color={'lightgray'} \n                    color={0x999999}\n                />\n\n                <Sink setBoxSize={setBoxSize} boxSize={boxSize} />\n\n                {/* <meshStandardMaterial attach=\"material-1\" color=\"#2A8AFF\" /> */}\n            </mesh>\n        )\n    }\n\n    return (\n        <>\n        {textureSelected && \n        <>\n            \n            {visible &&\n                <>\n                    <Html transform /*occlude*/ zIndexRange={1}\n                        position={[-boxSize.widthAll / 200 - 2.5, 0, 0]} rotation={[0, 0, Math.PI / 2]}>\n                        <div className=\"p-inputgroup\">\n                            {!location.pathname.includes('/save') ?\n                                <>\n                                    <span className=\"p-inputgroup-addon\">mm</span>\n                                    <input value={boxSize.heightAll} placeholder=\"size, mm\" style={{ width: \"100px\" }}\n                                        step={4} min={50} type='number'\n                                        onChange={(e) => setBoxSize({ ...boxSize, heightAll: +e.target.value })} />\n                                </>\n                                : <span className=\"p-inputgroup-addon\">{boxSize.heightAll}</span>\n                            }\n\n                        </div>\n                        {/* <div className=\"cls\"></div> */}\n                    </Html>\n\n                    <Html transform /*occlude*/ zIndexRange={1}\n                        position={[0, boxSize.heightAll / 200 + 2.5, 0]}>\n                        <div className=\"p-inputgroup\">\n                            {!location.pathname.includes('/save') ?\n                                <>\n                                    <span className=\"p-inputgroup-addon\">mm</span>\n                                    <input value={boxSize.widthAll} placeholder=\"size, mm\" style={{ width: \"100px\" }}\n                                        step={4} min={50} type='number'\n                                        onChange={(e) => setBoxSize({ ...boxSize, widthAll: +e.target.value })} />\n                                </>\n                                : <span className=\"p-inputgroup-addon\">{boxSize.widthAll}</span>\n                            }\n\n                        </div>\n                        {/* <DragButton boxSize={boxSize} setBoxSize={setBoxSize} /> */}\n                    </Html>\n\n                </>\n            }\n            \n            <Sky />\n            <NewBox instanceMatrix={true} needsUpdate={true} />\n            <Model/>\n            <EditSinkLayer boxSize={boxSize} setBoxSize={setBoxSize} />\n\n            <mesh position={[0,-11, 0]} rotation={[Math.PI / 2, 0, 0]} \n                scale={[100, 100, 1]} receiveShadow>\n                <planeBufferGeometry />\n                <meshPhongMaterial color=\"gray\" map={texturePlaneMap} side={DoubleSide} />\n            </mesh>\n\n            <GizmoHelper alignment=\"bottom-right\" margin={[80, 80]}>\n                <GizmoViewport labelColor=\"white\" axisHeadScale={1} />\n            </GizmoHelper>\n            \n        </>\n        }\n        </>\n    )\n}\n\nexport default Scene\n","import React, { useState } from 'react'\n\nconst EditSinkLayer = (props) => {\n    let scale = 100\n    let boxSize = props.boxSize\n    const [hovered, setHover] = useState(false)\n\n    function removeCut(cut) {\n        props.setBoxSize({\n            ...boxSize, cuts: boxSize.cuts.filter((item, i) => i !== cut)\n        })\n    }\n\n    function editCut(cut) {\n        // тут будет фнукция изменения положения и размера отверстия\n    }\n\n    return (\n        <>\n            {props.boxSize.cuts.map((cut, i) => {\n\n                return (\n                    <mesh key={i}\n                        rotation={\n                            cut.forma === \"square\" ? [0, 0, cut.rotation[2]] : [Math.PI / 2, 0, 0]\n                        }\n                        position={[cut.position[0], cut.position[1], 0]}\n                        // onPointerDown={()=> props.removeCut(i)}\n                        // onDoubleClick={()=> props.removeCut(i)}\n                        onContextMenu={() => removeCut(i)}\n                        onPointerOver={(event) => setHover(i)}\n                        onPointerOut={(event) => setHover(false)}\n                    >\n                        {cut.forma === \"square\" ?\n                            <boxGeometry args={[cut.width / scale, cut.height / scale, boxSize.thickness / scale]} />\n                            :\n                            <cylinderGeometry args={[cut.width / 2 / scale, cut.width / 2 / scale, boxSize.thickness / scale]} />\n                        }\n                        \n                        <meshPhongMaterial color={hovered === i ? 'red' : '#fff'} transparent={true} opacity={hovered !== i ? 0 : .6} />\n                    </mesh>\n                )\n\n            })\n            }\n        </>\n    )\n\n}\n\nexport default EditSinkLayer\n","export function inPoly(position, sinkState, boxSize, scal){\n    // console.log(\"!!!!!!!!!\", position, sinkState, boxSize, scal)\n    var x = position.x<0 ? position.x - sinkState.width/scal/2 : position.x + sinkState.width/scal/2;\n    var y = position.y<0 ? position.y - sinkState.height/scal/2 : position.y + sinkState.height/scal/2;\n    let xp, yp\n\n    if(boxSize.forma === 3){ // ограничение координат для П-образной формы\n        // Координаты  П образной модели\n        xp = new Array( // Массив X-координат полигона\n            -boxSize.widthAll/scal+boxSize.widthRight/scal/2, //1\n            -boxSize.widthAll/scal+boxSize.widthRight/scal/2, //2\n            boxSize.widthRight/scal/2, //3\n            boxSize.widthRight/scal/2, //4\n            -boxSize.widthRight/scal/2, //5\n            -boxSize.widthRight/scal/2, //6\n            -boxSize.widthAll/scal+boxSize.widthRight/scal, //7\n            -boxSize.widthAll/scal+boxSize.widthRight/scal, //8\n        ); // Массив X-координат полигона\n        yp = new Array( // Массив Y-координат полигона\n            -boxSize.heightAll/scal/2, //1\n            boxSize.heightAll/scal/2, //2\n            boxSize.heightAll/scal/2, //3\n            -( boxSize.heightAll/scal/2 - (boxSize.heightAll - boxSize.heightRight)/scal ), //4\n            -( boxSize.heightAll/scal/2 - (boxSize.heightAll - boxSize.heightRight)/scal ), //5\n            boxSize.heightAll/scal/2 - boxSize.heightRight/scal + boxSize.heightInsideRight/scal, //6\n            (boxSize.heightAll/2 - (boxSize.heightRight - boxSize.heightInsideRight))/scal, //7\n            -boxSize.heightAll/scal/2, //8\n        ); // Массив Y-координат полигона\n       \n    }else if(boxSize.forma === 2){ // ограничение координат для Г-образной формы\n        xp = new Array( // Массив X-координат полигона\n            -boxSize.widthVertical/scal/2,\n            -boxSize.widthVertical/scal/2,\n            (boxSize.widthAll-boxSize.widthVertical/2)/scal,\n            (boxSize.widthAll-boxSize.widthVertical/2)/scal,\n            boxSize.widthVertical/scal/2,\n            boxSize.widthVertical/scal/2,\n        ); // Массив X-координат полигона\n        yp = new Array( // Массив Y-координат полигона\n            -boxSize.heightAll/scal/2,\n            boxSize.heightAll/scal/2,\n            boxSize.heightAll/scal/2,\n            (boxSize.heightAll - boxSize.heightGorizonal*2)/scal/2,\n            (boxSize.heightAll - boxSize.heightGorizonal*2)/scal/2,\n            -boxSize.heightAll/scal/2,\n        ); // Массив Y-координат полигона\n       \n    }\n\n    var npol = xp.length;\n    var j = npol - 1;\n    var c = false;\n\n    for (var i = 0; i < npol;i++){\n        if ((((yp[i]<=y) && (y<yp[j])) || ((yp[j]<=y) && (y<yp[i]))) &&\n          (x > (xp[j] - xp[i]) * (y - yp[i]) / (yp[j] - yp[i]) + xp[i])) {\n          c = !c\n        }\n      j = i;\n    }\n    return c;\n}\n","import React, { useRef, useState, useEffect, useMemo } from 'react'\nimport { Canvas, useLoader, useThree } from '@react-three/fiber'\nimport { useTexture, PivotControls, Decal, Html, Text, Grid, Line } from \"@react-three/drei\"\nimport { SVGLoader } from 'three/examples/jsm/loaders/SVGLoader'\n// import { useControls } from 'leva'\nimport * as THREE from \"three\"\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setVisibleSink } from \"../../redux/reducers/scene.js\";\nimport { inPoly } from './inPoly.js'\n\nimport \"./3D.scss\"\nimport { Button } from 'primereact/button'\n\nconst Sink = (props) => {\n    let scal = 100 // значение масштабирования\n    const { visibleSink, sinkState } = useSelector((state) => state.scene)\n    const dispatch = useDispatch()\n    const [pos, setXYZ] = useState([0, 0, props.boxSize.thickness / scal])\n\n    const [rot, setRot] = useState([0, 0, 0])\n    const [colorDecal, setColorDecal] = useState('rgb(236, 108, 108)')    \n\n    function cutSink() {\n        props.setBoxSize({\n            ...props.boxSize, cuts:\n\n                [...props.boxSize.cuts, {\n                    forma: sinkState.forma, width: sinkState.width, height: sinkState.height,\n                    position: pos, rotation: rot\n                }]\n\n        })\n        // props.cuts.push({ sinkSize: scale, position: positionSink } )\n        dispatch(setVisibleSink())\n    }\n    \n\n    //вычесление расстояния от края до отверстия\n    //без учета поворотов (для прямоугольных отверстий)\n    function sizeToEnd() {\n        // Расстояния от края до центра по \"х\" и \"у\"\n        let endToCenterX = Math.round(pos[0] * scal - -props.boxSize.widthAll / 2)\n        let endToCenterY = Math.round(props.boxSize.heightAll / 2 - pos[1] * scal)\n        // Расстояния от края до кпая отверстия по \"х\" и \"у\"\n        // без учета повроротов для прямоугольных отверстий\n        let endToEndX = Math.round(pos[0] * scal - -props.boxSize.widthAll / 2 - 100)\n        let endToEndY = Math.round(props.boxSize.heightAll / 2 - pos[1] * scal - 150)\n        return {\n            endToCenterX: endToCenterX, // от края до центра по Х\n            endToCenterY: endToCenterY, // от края до центра по Y\n            endToEndX: endToEndX, // от края до края по Х\n            endToEndY: endToEndY // от края до края по Y\n        }\n    }\n\n    // Функция изменение координат отвертсия при перетягивании мышью\n    function dragSink(position) {\n        // Ограничим движение отверстия границами габаритов модели\n        let x_axisLimits = Math.abs(position.x) + sinkState.width/200 < Math.abs(props.boxSize.widthAll/200)\n        let y_axisLimits = Math.abs(position.y) + (sinkState.height || sinkState.width)/200< Math.abs(props.boxSize.heightAll/200)\n        // Зададим изначальное положение отверстия для разных форм\n        let defPointCorrection = 0\n\n        if(props.boxSize.forma === 3){ // ограничение координат для П-образной формы\n            defPointCorrection = (props.boxSize.widthAll-props.boxSize.widthRight)/2/scal\n            // Изменить цвет декаля \n            // if( inPoly(position, {width: sinkState.width, height: sinkState.height}, props.boxSize, scal) ) setColorDecal('yellow')\n            // else setColorDecal('rgb(236, 108, 108)')\n            // Сдвинуть Декаль или ограниить движение\n            if( inPoly(position, {width: sinkState.width, height: sinkState.height}, props.boxSize, scal) ){\n                setXYZ(\n                    [\n                        position.x+defPointCorrection, \n                        position.y, \n                        props.boxSize.thickness / scal / 2 + 0.01\n                    ]\n                )\n            }\n           \n        }else if(props.boxSize.forma === 2){ // ограничение координат для Г-образной формы\n            defPointCorrection = -(props.boxSize.widthAll-props.boxSize.widthVertical)/2/scal\n\n            if( inPoly(position, {width: sinkState.width, height: sinkState.height}, props.boxSize, scal) ){\n\n                setXYZ(\n                    [\n                        position.x+defPointCorrection, \n                        position.y, \n                        props.boxSize.thickness / scal / 2 + 0.01\n                    ]\n                )\n\n            }\n           \n        }else{ // ограничение координат для простой формы\n            defPointCorrection = 0\n            x_axisLimits = Math.abs(position.x) + sinkState.width/200 < Math.abs(props.boxSize.widthAll/200)\n            y_axisLimits = Math.abs(position.y) + (sinkState.height || sinkState.width)/200< Math.abs(props.boxSize.heightAll/200)\n\n            setXYZ(\n                [\n                    x_axisLimits ? position.x+defPointCorrection : pos[0], \n                    y_axisLimits ? position.y : pos[1], \n                    props.boxSize.thickness / scal / 2 + 0.01\n                ]\n            )\n        }\n    }\n\n    let shemaCircle = `${process.env.PUBLIC_URL}/icons/circle.svg`\n    let shemaDecal = useTexture(shemaCircle)\n    \n    if (visibleSink) return (\n        <>\n            <group position={[ 0, 0, 0.25]}>\n                <PivotControls\n                    scale={0.88}\n                    activeAxes={[true, true, false]} //\n                    // onClick={() => { console.log(\"positionSink!!!\", positionSink) }}\n                    onDrag={(local) => {\n                        const position = new THREE.Vector3()\n                        // console.log(position)\n                        // setPositionSink(position)\n                        const scale = new THREE.Vector3()\n                        const quaternion = new THREE.Quaternion()\n                        local.decompose(position, quaternion, scale)\n                        const rotation = new THREE.Euler().setFromQuaternion(quaternion)\n                        dragSink(position)\n                        // console.log(position.x)\n                        setRot([rotation.x, rotation.y, rotation.z])\n                    }}\n                    onDragEnd={() => {\n                        // console.log(pos, rot)\n                    }}\n                />\n            </group>\n\n\n            <Decal //debug={debug} часть панели инструментов\n                position={pos} rotation={rot}\n                // scale={2 * scale}\n                scale={sinkState.forma == \"square\" ?\n                    [sinkState.width / 100, sinkState.height / 100, 1]\n                    :\n                    [sinkState.width / 100, sinkState.width / 100, 1]\n                }\n                // map={useTexture(urlPlita)}\n                color={colorDecal} //opacity={0.2}\n            >\n                {sinkState.forma !== \"square\" &&\n                    <meshPhysicalMaterial\n                        transparent\n                        polygonOffset\n                        polygonOffsetFactor={-10}\n                        map={shemaDecal}\n                        mapflipY={false}\n                        mapanisotropy={16}\n                        iridescence={1}\n                        iridescenceIOR={1}\n                        iridescenceThicknessRange={[0, 1400]}\n                        roughness={1}\n                        clearcoat={0.5}\n                        metalness={0.75}\n                        toneMapped={false}\n                    />\n                }\n            </Decal>    \n\n            <Html transform zIndexRange={1} position={[pos[0] + 1.5, pos[1] - 1, props.boxSize.thickness / scal / 2]}>\n                <Button style={styles.buttonSink} icon=\"pi pi-check\"\n                    tooltip=\"Вырезать\"\n                    // disabled={!positionSink.x}\n                    onClick={() => cutSink()}\n                />\n            </Html>\n        </>\n    )\n}\n\nexport default Sink\n\nconst styles = {\n    buttonSink: {\n        width: \"25px\",\n        height: \"15px\"\n    }\n}\n"],"names":["Torus","props","_jsxs","receiveShadow","castShadow","children","_jsx","args","MeshTransmissionMaterial","backside","backsideThickness","thickness","Knot","App","_Fragment","position","_ref","forma","mesh","scale","dispatch","useDispatch","location","useLocation","textureSelected","useSelector","state","prop_Box_forma","modelProperties","visible","colorBackground","scene","boxSize","setBoxSize","useState","useEffect","pathname","includes","set_Prop_Box_forma","setModelProperties","textureMap","useLoader","TextureLoader","url","texturePlaneMap","concat","process","NewBox","ref","matrixAutoUpdate","Geometry","Base","attach","widthAll","heightAll","Subtraction","rotation","cuts","map","cut","i","width","height","Math","PI","shininess","bumpMap","bumpScale","transparent","color","Sink","wrapS","THREE","wrapT","Html","transform","zIndexRange","className","value","placeholder","style","step","min","type","onChange","e","target","Sky","instanceMatrix","needsUpdate","Model","EditSinkLayer","side","DoubleSide","GizmoHelper","alignment","margin","GizmoViewport","labelColor","axisHeadScale","hovered","setHover","onContextMenu","filter","item","removeCut","onPointerOver","event","onPointerOut","opacity","inPoly","sinkState","scal","x","y","xp","yp","Array","widthRight","heightRight","heightInsideRight","widthVertical","heightGorizonal","npol","length","j","c","visibleSink","pos","setXYZ","rot","setRot","colorDecal","setColorDecal","shemaCircle","shemaDecal","useTexture","PivotControls","activeAxes","onDrag","local","quaternion","decompose","setFromQuaternion","x_axisLimits","abs","y_axisLimits","defPointCorrection","dragSink","z","onDragEnd","Decal","polygonOffset","polygonOffsetFactor","mapflipY","mapanisotropy","iridescence","iridescenceIOR","iridescenceThicknessRange","roughness","clearcoat","metalness","toneMapped","Button","styles","buttonSink","icon","tooltip","onClick","setVisibleSink"],"sourceRoot":""}