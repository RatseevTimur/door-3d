"use strict";(self.webpackChunkdoor=self.webpackChunkdoor||[]).push([[874],{874:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var s=i(5043),h=i(3216),o=i(2309),a=i(2474),n=i(2029),r=i(4315),l=i(7551),d=i(3970),c=i(9408),x=i(4569),g=i(7585),p=i(579);const m=e=>(0,p.jsxs)("mesh",{receiveShadow:!0,castShadow:!0,...e,children:[(0,p.jsx)("torusGeometry",{args:[4,1.2,128,64]}),(0,p.jsx)(g.$,{backside:!0,backsideThickness:5,thickness:2})]}),w=e=>(0,p.jsxs)("mesh",{receiveShadow:!0,castShadow:!0,...e,children:[(0,p.jsx)("torusKnotGeometry",{args:[3,1,256,32]}),(0,p.jsx)(g.$,{backside:!0,backsideThickness:5,thickness:2})]}),u=()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m,{position:[5,5,3]}),(0,p.jsx)(w,{castShadow:!0,position:[-10,-5,-10]})]});var j=i(7525),b=i(9577),A=i(9456),S=i(6413);i(1278);const f=e=>{let{forma:t,mesh:i}=e,g=100,m=(0,A.wA)();const w=(0,h.zy)();let f=(0,A.d4)((e=>e.textureSelected)),y=(0,A.d4)((e=>e.modelProperties.prop_Box_forma));const{visible:z,colorBackground:k}=(0,A.d4)((e=>e.scene)),[v,R]=(0,s.useState)(y);(0,s.useEffect)((()=>{w.pathname.includes("/save")||(m((0,S.rV)(v)),m((0,S.pq)(v)))}),[v]);const M=(0,l.F)(d.T,f.url),F=(0,l.F)(d.T,"/textures/tile_texture3062.jpeg");function G(e){return(0,p.jsxs)("mesh",{ref:i,castShadow:!0,receiveShadow:!0,...e,matrixAutoUpdate:!0,castShadow:!0,children:[(0,p.jsxs)(x.V2,{children:[(0,p.jsx)(x.C6,{children:(0,p.jsx)("boxGeometry",{attach:"geometry",args:[v.widthAll/100,v.heightAll/100,v.thickness/100]})}),(0,p.jsx)(x.ZO,{rotation:[0,0,0],position:[0,0,0],children:(0,p.jsx)("cylinderGeometry",{args:[0,0,0,3,3]})}),v.cuts.map(((e,t)=>"square"===e.forma?(0,p.jsx)(x.ZO,{rotation:[0,0,e.rotation[2]],position:[e.position[0],e.position[1],0],children:(0,p.jsx)("boxGeometry",{args:[e.width/g,e.height/g,1]})},t):(0,p.jsx)(x.ZO,{rotation:[Math.PI/2,0,0],position:[e.position[0],e.position[1],0],children:(0,p.jsx)("cylinderGeometry",{args:[e.width/2/g,e.width/2/g,1]})},t)))]}),(0,p.jsx)("meshPhongMaterial",{map:M,shininess:100,bumpMap:M,bumpScale:.01,transparent:!1,attach:"material-0",color:10066329}),(0,p.jsx)(j.A,{setBoxSize:R,boxSize:v})]})}return M.wrapS=c.RepeatWrapping,M.wrapT=c.MirroredRepeatWrapping,(0,p.jsx)(p.Fragment,{children:f&&(0,p.jsxs)(p.Fragment,{children:[z&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.E,{transform:!0,zIndexRange:1,position:[-v.widthAll/200-2.5,0,0],rotation:[0,0,Math.PI/2],children:(0,p.jsx)("div",{className:"p-inputgroup",children:w.pathname.includes("/save")?(0,p.jsx)("span",{className:"p-inputgroup-addon",children:v.heightAll}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"p-inputgroup-addon",children:"mm"}),(0,p.jsx)("input",{value:v.heightAll,placeholder:"size, mm",style:{width:"100px"},step:4,min:50,type:"number",onChange:e=>R({...v,heightAll:+e.target.value})})]})})}),(0,p.jsx)(o.E,{transform:!0,zIndexRange:1,position:[0,v.heightAll/200+2.5,0],children:(0,p.jsx)("div",{className:"p-inputgroup",children:w.pathname.includes("/save")?(0,p.jsx)("span",{className:"p-inputgroup-addon",children:v.widthAll}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"p-inputgroup-addon",children:"mm"}),(0,p.jsx)("input",{value:v.widthAll,placeholder:"size, mm",style:{width:"100px"},step:4,min:50,type:"number",onChange:e=>R({...v,widthAll:+e.target.value})})]})})})]}),(0,p.jsx)(a.m,{}),(0,p.jsx)(G,{instanceMatrix:!0,needsUpdate:!0}),(0,p.jsx)(u,{}),(0,p.jsx)(b.A,{boxSize:v,setBoxSize:R}),(0,p.jsxs)("mesh",{position:[0,-11,0],rotation:[Math.PI/2,0,0],scale:[100,100,1],receiveShadow:!0,children:[(0,p.jsx)("planeBufferGeometry",{}),(0,p.jsx)("meshPhongMaterial",{color:"gray",map:F,side:c.DoubleSide})]}),(0,p.jsx)(n.z,{alignment:"bottom-right",margin:[80,80],children:(0,p.jsx)(r.t,{labelColor:"white",axisHeadScale:1})})]})})}},9577:(e,t,i)=>{i.d(t,{A:()=>o});var s=i(5043),h=i(579);const o=e=>{let t=100,i=e.boxSize;const[o,a]=(0,s.useState)(!1);return(0,h.jsx)(h.Fragment,{children:e.boxSize.cuts.map(((s,n)=>(0,h.jsxs)("mesh",{rotation:"square"===s.forma?[0,0,s.rotation[2]]:[Math.PI/2,0,0],position:[s.position[0],s.position[1],0],onContextMenu:()=>function(t){e.setBoxSize({...i,cuts:i.cuts.filter(((e,i)=>i!==t))})}(n),onPointerOver:e=>a(n),onPointerOut:e=>a(!1),children:["square"===s.forma?(0,h.jsx)("boxGeometry",{args:[s.width/t,s.height/t,i.thickness/t]}):(0,h.jsx)("cylinderGeometry",{args:[s.width/2/t,s.width/2/t,i.thickness/t]}),(0,h.jsx)("meshPhongMaterial",{color:o===n?"red":"#fff",transparent:!0,opacity:o!==n?0:.6})]},n)))})}},7525:(e,t,i)=>{i.d(t,{A:()=>p});var s=i(5043),h=i(2201),o=i(6569),a=i(1940),n=i(2309),r=i(9408),l=i(9456),d=i(795);function c(e,t,i,s){var h=e.x<0?e.x-t.width/s/2:e.x+t.width/s/2,o=e.y<0?e.y-t.height/s/2:e.y+t.height/s/2;let a,n;3===i.forma?(a=new Array(-i.widthAll/s+i.widthRight/s/2,-i.widthAll/s+i.widthRight/s/2,i.widthRight/s/2,i.widthRight/s/2,-i.widthRight/s/2,-i.widthRight/s/2,-i.widthAll/s+i.widthRight/s,-i.widthAll/s+i.widthRight/s),n=new Array(-i.heightAll/s/2,i.heightAll/s/2,i.heightAll/s/2,-(i.heightAll/s/2-(i.heightAll-i.heightRight)/s),-(i.heightAll/s/2-(i.heightAll-i.heightRight)/s),i.heightAll/s/2-i.heightRight/s+i.heightInsideRight/s,(i.heightAll/2-(i.heightRight-i.heightInsideRight))/s,-i.heightAll/s/2)):2===i.forma&&(a=new Array(-i.widthVertical/s/2,-i.widthVertical/s/2,(i.widthAll-i.widthVertical/2)/s,(i.widthAll-i.widthVertical/2)/s,i.widthVertical/s/2,i.widthVertical/s/2),n=new Array(-i.heightAll/s/2,i.heightAll/s/2,i.heightAll/s/2,(i.heightAll-2*i.heightGorizonal)/s/2,(i.heightAll-2*i.heightGorizonal)/s/2,-i.heightAll/s/2));for(var r=a.length,l=r-1,d=!1,c=0;c<r;c++)(n[c]<=o&&o<n[l]||n[l]<=o&&o<n[c])&&h>(a[l]-a[c])*(o-n[c])/(n[l]-n[c])+a[c]&&(d=!d),l=c;return d}i(1278);var x=i(2018),g=i(579);const p=e=>{let t=100;const{visibleSink:i,sinkState:p}=(0,l.d4)((e=>e.scene)),w=(0,l.wA)(),[u,j]=(0,s.useState)([0,0,e.boxSize.thickness/t]),[b,A]=(0,s.useState)([0,0,0]),[S,f]=(0,s.useState)("rgb(236, 108, 108)");let y=(0,h.z)("../icons/circle.svg");if(i)return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("group",{position:[0,0,.25],children:(0,g.jsx)(o.n,{scale:.88,activeAxes:[!0,!0,!1],onDrag:i=>{const s=new r.Vector3,h=new r.Vector3,o=new r.Quaternion;i.decompose(s,o,h);const a=(new r.Euler).setFromQuaternion(o);!function(i){let s=Math.abs(i.x)+p.width/200<Math.abs(e.boxSize.widthAll/200),h=Math.abs(i.y)+(p.height||p.width)/200<Math.abs(e.boxSize.heightAll/200),o=0;3===e.boxSize.forma?(o=(e.boxSize.widthAll-e.boxSize.widthRight)/2/t,c(i,{width:p.width,height:p.height},e.boxSize,t)&&j([i.x+o,i.y,e.boxSize.thickness/t/2+.01])):2===e.boxSize.forma?(o=-(e.boxSize.widthAll-e.boxSize.widthVertical)/2/t,c(i,{width:p.width,height:p.height},e.boxSize,t)&&j([i.x+o,i.y,e.boxSize.thickness/t/2+.01])):(o=0,s=Math.abs(i.x)+p.width/200<Math.abs(e.boxSize.widthAll/200),h=Math.abs(i.y)+(p.height||p.width)/200<Math.abs(e.boxSize.heightAll/200),j([s?i.x+o:u[0],h?i.y:u[1],e.boxSize.thickness/t/2+.01]))}(s),A([a.x,a.y,a.z])},onDragEnd:()=>{}})}),(0,g.jsx)(a.C,{position:u,rotation:b,scale:"square"==p.forma?[p.width/100,p.height/100,1]:[p.width/100,p.width/100,1],color:S,children:"square"!==p.forma&&(0,g.jsx)("meshPhysicalMaterial",{transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10,map:y,mapflipY:!1,mapanisotropy:16,iridescence:1,iridescenceIOR:1,iridescenceThicknessRange:[0,1400],roughness:1,clearcoat:.5,metalness:.75,toneMapped:!1})}),(0,g.jsx)(n.E,{transform:!0,zIndexRange:1,position:[u[0]+1.5,u[1]-1,e.boxSize.thickness/t/2],children:(0,g.jsx)(x.$,{style:m.buttonSink,icon:"pi pi-check",tooltip:"\u0412\u044b\u0440\u0435\u0437\u0430\u0442\u044c",onClick:()=>(e.setBoxSize({...e.boxSize,cuts:[...e.boxSize.cuts,{forma:p.forma,width:p.width,height:p.height,position:u,rotation:b}]}),void w((0,d.O)()))})})]})},m={buttonSink:{width:"25px",height:"15px"}}},1278:()=>{}}]);
//# sourceMappingURL=874.a1e82e9d.chunk.js.map